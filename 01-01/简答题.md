### 谈谈你是如何理解 JS 异步编程的

JS 异步编程是在遵循同步编程规律的基础上发生的特殊情况，造成这种特殊情况的原因是一些方法执行的速度较慢（如：ajax、fetch 需要从外部获取信息等）或功能需要（如：一些方法需要在另一些方法之前或之后被调用，网页上的内容显示先后等），为了不影响其他方法的正常运行和程序的性能，而使用的一类 API（以异步模式工作的 API）。它可以明确方法执行的先后。但异步编程本质上并不是一个写代码的方式。

---

### EventLoop

监听调用栈（Call Stack）和消息队列（Queue），发现调用栈中没有任务时而消息队列中还有任务未执行，便会在消息队列中取出第一个调用函数，放到调用栈中。

---

### 消息队列（Queue）

调用栈在执行函数时发现某些函数运行时间较长，这时这些函数会被放进 Web API 环境中继续执行，等执行结束后进入消息队列。消息队列是有序的，先入先出。EventLoop 在消息队列中发现有未执行的任务而调用栈又是空闲状态，它就会拿一个压入调用栈中执行。

- 调用栈 == 执行中事项
- 消息队列 == 待办事项

---

### 宏任务、微任务

课程中的例子很形象——在银行排队办理业务或办理业务完成时，需要办理新的业务，这时：
微任务：和之前的业务一起办理，不用重新排队
宏任务：重新排队办理业务
微任务好在它可以提高程序的响应能力，提高运行效率，但现在大部分在编程中遇到的异步 API 都是作为宏任务执行的。

#### 运行顺序：

主线程中遵守同步规则地在调用栈中执行类似全局变量和方法的任务，这时如果有异步调用会同时被执行（但不由主线程来执行），当主线程中的任务执行完后，执行消息队列中的微任务，最后才是宏任务（宏任务中如果还有微任务又会进入队列）
